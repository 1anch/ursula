---
controller_primary: &controller "{{ hostvars[groups['controller'][0]]['ansible_eth0']['ipv4']['address'] }}"

secrets:
  admin_token:      asdf
  db_password:      asdf
  service_password: &service_password asdf
  rabbit_password:  asdf
  admin_password:   &admin_password asdf
  metadata_proxy_shared_secret: asdf
  horizon_secret_key:           asdf

endpoints:
  main:     *controller
  db:       *controller
  keystone: *controller
  rabbit:   *controller
  nova:     *controller
  glance:   *controller
  neutron:  *controller

mysql:
  root_password: asdf
xtradb:
  client_version: 5.5
  server_version: 5.5
  sst_auth_user: sst_admin
  sst_auth_password: asdf

sensu:
  rabbit:
    host: *controller
    port: 5672
    user: sensu
    pass: asdf

openstack:
  # TODO: pypi should use https, but fails currently.
  pypi_mirror: http://pypi.openstack.org/openstack
  git_mirror:  https://review.openstack.org/openstack

nova:
  rev: 83865447
  libvirt_type: qemu
  compute_driver: nova.virt.libvirt.LibvirtDriver
  client:
    rev: 01635a2a

novnc:
  repo: https://github.com/kanaka/noVNC.git
  rev: 292f6a5d

horizon:
  rev: fe659b23

neutron:
  rev: f3c016d7
  client:
    rev: 5a382451
  physical_bridge: br-ex
  physical_network: br-ex
  tenant_network_type: gre
  enable_tunneling: True
  networks:
    - name: internal
      shared: true
      external: false
      network_type: gre
      segmentation_id: 256
  subnets:
    - name: internal
      network_name: internal
      cidr: 172.16.255.0/24
      enable_dhcp: "true"
      gateway_ip: 172.16.255.1
      ip_version: 4

glance:
  rev: 563c71c1
  client:
    rev: 3de64660
  images:
    - name: cirros
      url: https://launchpad.net/cirros/trunk/0.3.0/+download/cirros-0.3.0-x86_64-disk.img
#    - name: ubuntu-12.04
#      url: http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-amd64-disk1.img
#    - name: ubuntu-13.04
#      url: http://cloud-images.ubuntu.com/releases/13.04/release/ubuntu-13.04-server-cloudimg-amd64-disk1.img

keystone:
  rev: 708ccf08
  client:
    rev: 8429623b
  tenants:
    - admin
    - service
    - demo

  users:
    - name: admin
      password: *admin_password
      tenant: admin
    - name: demo
      password: demopass
      tenant: demo

    - name: nova
      password: *service_password
      tenant: service
    - name: glance
      password: *service_password
      tenant: service
    - name: neutron
      password: *service_password
      tenant: service

  user_roles:
    - user: admin
      tenant: admin
      role: admin
    - user: admin
      tenant: demo
      role: admin
    - user: nova
      tenant: service
      role: service
    - user: glance
      tenant: service
      role: service
    - user: neutron
      tenant: service
      role: service
    - user: neutron
      tenant: service
      role: admin

  # TODO: fill ips/hostnames in dynamically.
  services:
    - name: keystone
      type: identity
      description: 'Identity Service'
      public_url: http://{{ endpoints.main }}:5000/v2.0
      internal_url: http://{{ endpoints.main }}:5000/v2.0
      admin_url: http://{{ endpoints.main }}:35357/v2.0
    - name: nova
      type: compute
      description: 'Compute Service'
      public_url: http://{{ endpoints.main }}:8774/v2/%(tenant_id)s
      internal_url: http://{{ endpoints.main }}:8774/v2/%(tenant_id)s
      admin_url: http://{{ endpoints.main }}:8774/v2/%(tenant_id)s
    - name: glance
      type: image
      description: 'Image Service'
      public_url: http://{{ endpoints.main }}:9292
      internal_url: http://{{ endpoints.main }}:9292
      admin_url: http://{{ endpoints.main }}:9292
    - name: neutron
      type: network
      description: 'Network Service'
      public_url: http://{{ endpoints.main }}:9696
      internal_url: http://{{ endpoints.main }}:9696
      admin_url: http://{{ endpoints.main }}:9696

