---
- name: add debug symbol archive key
  apt_key: keyserver=keyserver.ubuntu.com id=2512191FEF8729D6E5AF414DECDCAD72428D7C01

- name: add debug symbol apt repository
  apt_repository:
    repo: 'deb http://ddebs.ubuntu.com/ {{ item }} main restricted universe multiverse'
    update_cache: yes
  with_items:
  - precise
  - precise-updates
  - precise-proposed
  when: ansible_distribution_version == "12.04"

- name: add debug symbol apt repository
  apt_repository:
    repo: 'deb http://ddebs.ubuntu.com/ {{ item }} main restricted universe multiverse'
    update_cache: yes
  with_items:
  - trusty
  - trusty-security
  - trusty-updates
  - trusty-proposed
  when: ansible_distribution_version == "14.04"

- name: install kernel debug symbols for running kernel (requires recent kernel)
  apt: pkg=linux-image-{{ ansible_kernel }}-dbgsym state=present
