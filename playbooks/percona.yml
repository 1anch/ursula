---
- name: install percona on primary
  hosts: db
  vars:
    # this is fucking braindead beyond belief. here I am circumventing host groupings.
    # I have quite literally tried to do this many, many other ways without success.
    primary_node_ip: "{{ hostvars[groups['db'][0]]['ansible_eth0']['ipv4']['address'] }}"
  roles:
    - percona-common
    - percona-server

- name: install percona arbiter
  hosts: db_arbiter
  roles:
    - percona-common
    - percona-arbiter
