---
- hosts: controller
  roles:
    - client
    - keystone
    - glance
    - nova
    - neutron
    - rabbit
    - horizon
  tasks:
    - include: nova/tasks/controller.yml
    - include: nova/tasks/novnc.yml
    - include: neutron/tasks/controller.yml

- hosts: controller[0]
  name: things which should be run on only one controller.
  roles:
    - db
  tasks:
    - include: keystone/tasks/users.yml
    - include: glance/tasks/images.yml
    - include: neutron/tasks/networks.yml
