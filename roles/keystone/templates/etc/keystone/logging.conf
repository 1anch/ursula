[DEFAULT]
logging_context_format_string=%(asctime)s {{ ansible_hostname }} %(name)s[%(process)d]: %(levelname)s [%(request_id)s %(user)s %(tenant)s] %(instance)s%(message)s
logging_default_format_string=%(asctime)s {{ ansible_hostname }} %(name)s[%(process)d]: %(levelname)s [-] %(instance)s%(message)s

[loggers]
keys = root, access

[handlers]
keys = syslog, file, access_file

[formatters]
keys = context, minimal, normal


###########
# Loggers #
###########

[logger_root]
level = WARNING
handlers = syslog, file

[logger_access]
level = INFO
qualname = access
handlers = access_file


################
# Log Handlers #
################

[handler_syslog]
class = handlers.SysLogHandler
level = WARNING
formatter = context
args = (('127.0.0.1', handlers.SYSLOG_UDP_PORT), handlers.SysLogHandler.LOG_USER)

[handler_file]
class = handlers.TimedRotatingFileHandler
level = WARNING
formatter = normal
args = ('/var/log/keystone/error.log', 'midnight', 1, 14)

[handler_access_file]
class = handlers.TimedRotatingFileHandler
level = INFO
formatter = minimal
args = ('/var/log/keystone/access.log', 'midnight', 1, 14)


##################
# Log Formatters #
##################

[formatter_minimal]
format = %(message)s

[formatter_normal]
format = (%(name)s): %(asctime)s %(levelname)s %(message)s

[formatter_context]
class = keystone.openstack.common.log.ContextFormatter
datefmt = %b %d %H:%M:%S
